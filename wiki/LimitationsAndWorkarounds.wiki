#summary cyg-apt can't change the packages it itself uses. There is a workaround. It isn't perfect.

_summary cyg-apt can't change the packages it itself uses. There is a workaround. It isn't perfect._

cyg-apt has some limitations under Cygwin: it cannot change the packages it depends on. In practice these packages are few in number, mostly present when cyg-apt is installed and not affected by most cyg-apt commands.

= Details =
The packages cyg-apt cannot change under Cygwin are:
{{{
cat .cyg-apt
...
barred = "python cygwin base-cygwin coreutils bash zlib libreadline"
}}}

These packages are termed "barred" packages and you will be warned if you attempt to remove or install them.

To change these packages you must run cyg-apt from outside Cygwin. cyg-apt (the same script) runs from a DOS box if you have Windows Python installed.

||http://www.python.org/download/releases/2.6.2/||

(cyg-apt hasn't been tested under the upcoming Python 3.0. But then again Cygwin is back in the misty 2.5 days :D )

cyg-apt is very slow under DOS -- I don't recommend it for normal use.
  * Copy cyg-apt to your home directory if required
  * Open a DOS box
  * Navigate to your home directory
  * Update package with -f (force) flag
==Example: upgrading zlib to a new release:==
{{{
$ cd ~
$ copy /usr/bin/cyg-apt .
start->run->cmd
C:\Documents and Settings\chrisc> e:
E:\> cd E:\cygwin_1_7\home\chrisc
E:\cygwin_1_7\home\chrisc>
E:\cygwin_1_7\home\chrisc> python cyg-apt --help
cyg-apt [OPTION]... COMMAND [PACKAGE]...
Configuration: E:/cygwin_1_7/home/chrisc/.cyg-apt
    Commands:
...
E:\cygwin_1_7\home\chrisc>python cyg-apt install zlib
cyg-apt: NOT installing zlib: cyg-apt is dependent on this package under Cygwin.
Use -f to override but proceed with caution.

E:\cygwin_1_7\home\chrisc>python cyg-apt -f install zlib
E:/home/application_data/cygwin_1_7/http%3a%2f%2fmirror.internode.on.net%2fpub%2
fcygwin%2f/release-2/zlib/zlib-1.2.3-10.tar.bz2
b518ce6051d0ca46985d3cd04aa83439  zlib-1.2.3-10.tar.bz2
b518ce6051d0ca46985d3cd04aa83439  zlib-1.2.3-10.tar.bz2
installing zlib 1.2.3-10
}}}

== Bugs ==
Under DOS, currently links are unpacked as copies, not links since Windows (amazingly) doesn't have links. This makes some packages such as vim very slow to install, very large and possibly buggy: a copy is not a link.

== Warning ==
The -f flag is a safety catch: I recommend great caution when updating the Cygwin core packages. It is possible that the official setup.exe may carry out undocumented actions when updating the Cygwin core which cyg-apt will not emulate. 

While cyg-apt does work under DOS (I have reinstalled Cygwin Python, for example), Python has some subtle faults under Windows, so I am concerned some bugs may remain.